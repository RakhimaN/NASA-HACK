# –¢–µ—Å—Ç—ã NASA Weather Analysis System

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–æ–≤

**–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: 109 ‚úÖ**
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ
- ‚è±Ô∏è –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ~54 —Å–µ–∫—É–Ω–¥—ã

## üß™ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

### 1. `test_analyze_weather.py` (33 —Ç–µ—Å—Ç–∞)
–¢–µ—Å—Ç—ã –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ `analyze_weather()`

- **TestAnalyzeWeatherBasic** (8 —Ç–µ—Å—Ç–æ–≤)
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –∫–ª—é—á–µ–π
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π (0-1)
  
- **TestAnalyzeWeatherLocations** (5 —Ç–µ—Å—Ç–æ–≤)
  - –ú–æ—Å–∫–≤–∞, –ù—å—é-–ô–æ—Ä–∫, –¢–æ–∫–∏–æ, –õ–æ–Ω–¥–æ–Ω, –°–∏–¥–Ω–µ–π
  - –°–µ–≤–µ—Ä–Ω–æ–µ –∏ —é–∂–Ω–æ–µ –ø–æ–ª—É—à–∞—Ä–∏–µ
  
- **TestAnalyzeWeatherDates** (7 —Ç–µ—Å—Ç–æ–≤)
  - –í—Å–µ —Å–µ–∑–æ–Ω—ã –≥–æ–¥–∞
  - –í–∏—Å–æ–∫–æ—Å–Ω—ã–π –≥–æ–¥ (29 —Ñ–µ–≤—Ä–∞–ª—è)
  - –ì—Ä–∞–Ω–∏—á–Ω—ã–µ –¥–∞—Ç—ã (1 —è–Ω–≤–∞—Ä—è, 31 –¥–µ–∫–∞–±—Ä—è)
  
- **TestAnalyzeWeatherDataSources** (2 —Ç–µ—Å—Ç–∞)
  - NASA POWER API
  - Open-Meteo API
  
- **TestAnalyzeWeatherValidation** (5 —Ç–µ—Å—Ç–æ–≤)
  - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
  - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã
  
- **TestAnalyzeWeatherProbabilities** (3 —Ç–µ—Å—Ç–∞)
  - –ù–∞–ª–∏—á–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω—ã—Ö –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–µ–∫–≤–∞—Ç–Ω–æ—Å—Ç–∏ (–ª–µ—Ç–æ–º –Ω–µ —Ö–æ–ª–æ–¥–Ω–æ, –∑–∏–º–æ–π –Ω–µ –∂–∞—Ä–∫–æ)
  
- **TestAnalyzeWeatherStatistics** (2 —Ç–µ—Å—Ç–∞)
  - –ù–∞–ª–∏—á–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
  - –†–∞–∑—É–º–Ω–æ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä
  
- **TestAnalyzeWeatherCaching** (1 —Ç–µ—Å—Ç)
  - –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –≤—ã–∑–æ–≤—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫—ç—à

### 2. `test_analyze_weather_range.py` (43 —Ç–µ—Å—Ç–∞)
–¢–µ—Å—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏ `analyze_weather_range()` –¥–ª—è –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ –¥–∞—Ç

- **TestAnalyzeWeatherRangeBasic** (7 —Ç–µ—Å—Ç–æ–≤)
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
  - –ù–∞–ª–∏—á–∏–µ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  - –†–∞–∑–±–∏–≤–∫–∞ –ø–æ –¥–Ω—è–º
  
- **TestAnalyzeWeatherRangeDurations** (4 —Ç–µ—Å—Ç–∞)
  - 2 –¥–Ω—è, –Ω–µ–¥–µ–ª—è, 2 –Ω–µ–¥–µ–ª–∏, –º–µ—Å—è—Ü
  
- **TestAnalyzeWeatherRangeLocations** (4 —Ç–µ—Å—Ç–∞)
  - –ú–æ—Å–∫–≤–∞, –ù—å—é-–ô–æ—Ä–∫, –¢–æ–∫–∏–æ, –°–æ—á–∏
  
- **TestAnalyzeWeatherRangeValidation** (3 —Ç–µ—Å—Ç–∞)
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  - –ù–∞—á–∞–ª–æ –ø–æ—Å–ª–µ –∫–æ–Ω—Ü–∞ = –æ—à–∏–±–∫–∞
  
- **TestAnalyzeWeatherRangeAggregation** (3 —Ç–µ—Å—Ç–∞)
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ª—É—á—à–∏—Ö –¥–Ω–µ–π
  
- **TestAnalyzeWeatherRangeDailyBreakdown** (3 —Ç–µ—Å—Ç–∞)
  - –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –∏–º–µ–µ—Ç –¥–∞—Ç—É –∏ –¥–µ–Ω—å –≥–æ–¥–∞
  - –î–Ω–∏ –∏–¥—É—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
  
- **TestAnalyzeWeatherRangeSpecialCases** (3 —Ç–µ—Å—Ç–∞)
  - –ì—Ä–∞–Ω–∏—Ü—ã –º–µ—Å—è—Ü–µ–≤ –∏ –≥–æ–¥–∞
  - –í–∏—Å–æ–∫–æ—Å–Ω—ã–π —Ñ–µ–≤—Ä–∞–ª—å
  
- **TestAnalyzeWeatherRangeDataSources** (2 —Ç–µ—Å—Ç–∞)
  - NASA –∏ Open-Meteo –∏—Å—Ç–æ—á–Ω–∏–∫–∏
  
- **TestAnalyzeWeatherRangeRealScenarios** (3 —Ç–µ—Å—Ç–∞)
  - –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ø—É—Å–∫–∞ (2 –Ω–µ–¥–µ–ª–∏)
  - –ü–æ–µ–∑–¥–∫–∞ –Ω–∞ –≤—ã—Ö–æ–¥–Ω—ã–µ
  - –ö–æ–º–∞–Ω–¥–∏—Ä–æ–≤–∫–∞

### 3. `test_data_service.py` (23 —Ç–µ—Å—Ç–∞)
–¢–µ—Å—Ç—ã —Å–µ—Ä–≤–∏—Å–∞ –¥–∞–Ω–Ω—ã—Ö `WeatherDataService`

- **TestWeatherDataServiceInit** (3 —Ç–µ—Å—Ç–∞)
  - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å —Ä–∞–∑–Ω—ã–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
  
- **TestWeatherDataServiceGetData** (4 —Ç–µ—Å—Ç–∞)
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö
  - NASA –∏ Open-Meteo –∏—Å—Ç–æ—á–Ω–∏–∫–∏
  - –î–∞–Ω–Ω—ã–µ –∑–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ª–µ—Ç
  
- **TestWeatherDataServiceLocations** (5 —Ç–µ—Å—Ç–æ–≤)
  - –†–∞–∑–Ω—ã–µ –ª–æ–∫–∞—Ü–∏–∏ –ø–æ –º–∏—Ä—É
  - –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
  - –Æ–∂–Ω–æ–µ –ø–æ–ª—É—à–∞—Ä–∏–µ
  
- **TestWeatherDataServiceYearRanges** (3 —Ç–µ—Å—Ç–∞)
  - 1 –≥–æ–¥, 2 –≥–æ–¥–∞, 5 –ª–µ—Ç
  
- **TestWeatherDataServiceDataFormat** (4 —Ç–µ—Å—Ç–∞)
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ DataFrame
  - –ù–∞–ª–∏—á–∏–µ –∫–æ–ª–æ–Ω–∫–∏ day_of_year
  - –î–∏–∞–ø–∞–∑–æ–Ω –∑–Ω–∞—á–µ–Ω–∏–π
  - –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
  
- **TestWeatherDataServiceCaching** (1 —Ç–µ—Å—Ç)
  - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 4. `test_utils.py` (13 —Ç–µ—Å—Ç–æ–≤)
–¢–µ—Å—Ç—ã —É—Ç–∏–ª–∏—Ç –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

- **TestDateUtils** (4 —Ç–µ—Å—Ç–∞)
  - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –¥–∞—Ç –≤ –¥–µ–Ω—å –≥–æ–¥–∞
  - –í–∏—Å–æ–∫–æ—Å–Ω—ã–π –≥–æ–¥
  
- **TestProbabilityFormatting** (4 —Ç–µ—Å—Ç–∞)
  - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ 0%, 50%, 100%
  - –î—Ä–æ–±–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
  
- **TestProbabilityCategorization** (5 —Ç–µ—Å—Ç–∞)
  - 5 –∫–∞—Ç–µ–≥–æ—Ä–∏–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π (very_low, low, moderate, high, very_high)
  
- **TestProbabilityDescription** (4 —Ç–µ—Å—Ç–∞)
  - –¢–µ–∫—Å—Ç–æ–≤—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π
  
- **TestUtilsImport** (4 —Ç–µ—Å—Ç–∞)
  - –ò–º–ø–æ—Ä—Ç –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç
  
- **TestConfig** (3 —Ç–µ—Å—Ç–∞)
  - –ù–∞–ª–∏—á–∏–µ –ø–æ—Ä–æ–≥–æ–≤ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä, –æ—Å–∞–¥–∫–æ–≤, –≤–µ—Ç—Ä–∞

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã

### –í—Å–µ —Ç–µ—Å—Ç—ã
```bash
cd /home/zerotwo/NASA
source venv/bin/activate
PYTHONPATH=/home/zerotwo/NASA:$PYTHONPATH pytest tests/ -v
```

### –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ –≤—ã–≤–æ–¥–∞)
```bash
PYTHONPATH=/home/zerotwo/NASA:$PYTHONPATH pytest tests/ -q
```

### –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª
```bash
PYTHONPATH=/home/zerotwo/NASA:$PYTHONPATH pytest tests/test_analyze_weather.py -v
```

### –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
```bash
PYTHONPATH=/home/zerotwo/NASA:$PYTHONPATH pytest tests/ --cov=weather_analysis --cov-report=html
```

## üìã –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Ç–µ—Å—Ç—ã

### ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –í—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω—ã (NASA, Open-Meteo)
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
- –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
- –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ
- –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ [0, 1]

### ‚úÖ –†–∞–∑–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- –†–∞–∑–ª–∏—á–Ω—ã–µ –ª–æ–∫–∞—Ü–∏–∏ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É
- –í—Å–µ —Å–µ–∑–æ–Ω—ã –≥–æ–¥–∞
- –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ (–≤–∏—Å–æ–∫–æ—Å–Ω—ã–π –≥–æ–¥, –≥—Ä–∞–Ω–∏—Ü—ã –≥–æ–¥–∞)
- –†–µ–∞–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –¢–µ—Å—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∑–∞ ~54 —Å–µ–∫—É–Ω–¥—ã
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–∫–æ—Ä—è–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

## üéØ –ü–æ–∫—Ä—ã—Ç–∏–µ

–¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç:
- ‚úÖ `analyze_weather()` - –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
- ‚úÖ `analyze_weather_range()` - –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç
- ‚úÖ `WeatherDataService` - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –£—Ç–∏–ª–∏—Ç—ã (date_to_day_of_year, format_probability, –∏ —Ç.–¥.)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ó–∞–ø—É—Å–∫ –æ–¥–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
```bash
pytest tests/test_analyze_weather.py::TestAnalyzeWeatherBasic::test_returns_dict -v
```

### –ó–∞–ø—É—Å–∫ –∫–ª–∞—Å—Å–∞ —Ç–µ—Å—Ç–æ–≤
```bash
pytest tests/test_analyze_weather.py::TestAnalyzeWeatherLocations -v
```

### –ü–æ–∫–∞–∑–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
```bash
pytest tests/ --durations=10
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª–Ω—ã–π –≤—ã–≤–æ–¥ –æ—à–∏–±–æ–∫
```bash
pytest tests/ -v --tb=long
```

### –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –Ω–∞ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ
```bash
pytest tests/ -x
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ä–µ–∂–∏–º–µ –¥–µ–±–∞–≥–∞
```bash
pytest tests/ -v --pdb
```

## ‚ú® –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

```
===================== 109 passed in 54.16s =======================

‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!
‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞
‚úÖ –ì–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
```
